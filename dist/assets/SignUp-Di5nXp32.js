import{P as r,u as $,a as G,r as l,j as e,L as J,b as K}from"./index-Bsjs9_Yf.js";import{T as Q,a as W,b as O,c as q,L as o,I as m}from"./label-DLZm5VYE.js";import{B as P}from"./button-CCrqzPEZ.js";const X=[{value:"Hindi",label:"Hindi"},{value:"English",label:"English"},{value:"Marathi",label:"Marathi"},{value:"Other",label:"Other"}],Z=[{value:"Hindi",label:"Hindi"},{value:"English",label:"English"},{value:"Marathi",label:"Marathi"},{value:"Other",label:"Other"}],N=({options:c,selectedValue:t,onSelect:u,placeholder:p,isOpen:g,toggleOpen:x})=>{var d;return e.jsxs("div",{className:"relative w-full",children:[e.jsxs("button",{type:"button",className:"w-full border rounded p-2 flex justify-between items-center",onClick:x,children:[t?(d=c.find(i=>i.value===t))==null?void 0:d.label:p,e.jsx("span",{children:"▼"})]}),g&&e.jsx("div",{className:"absolute z-10 w-full border rounded mt-1 bg-white shadow-lg",children:c.map(i=>e.jsxs("div",{className:"p-2 hover:bg-gray-100 cursor-pointer flex justify-between",onClick:()=>{u(i.value),x()},children:[i.label,t===i.value&&e.jsx("span",{children:"✓"})]},i.value))})]})};N.propTypes={options:r.arrayOf(r.shape({value:r.string.isRequired,label:r.string.isRequired})).isRequired,selectedValue:r.string,onSelect:r.func.isRequired,placeholder:r.string.isRequired,isOpen:r.bool.isRequired,toggleOpen:r.func.isRequired};const T=({checked:c,onChange:t,label:u})=>e.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer",onClick:t,children:[e.jsx("div",{className:`w-5 h-5 border rounded ${c?"bg-blue-500 text-white":"bg-white"} flex items-center justify-center`,children:c&&"✓"}),e.jsx("label",{children:u})]});T.propTypes={checked:r.bool.isRequired,onChange:r.func.isRequired,label:r.string.isRequired};const se=()=>{const c=$(),{showToast:t}=G(),[u,p]=l.useState("personal"),[g,x]=l.useState(""),[d,i]=l.useState(""),[j,A]=l.useState(""),[v,k]=l.useState(""),[h,R]=l.useState(""),[b,D]=l.useState(""),[w,B]=l.useState(""),[y,I]=l.useState(!1),[L,U]=l.useState(!1),[S,H]=l.useState(!1),[s,f]=l.useState({}),C={lightestBlue:"#C5BAFF",lightBlue:"#C4D9FF"},M=()=>{const a={};return g||(a.fullname="Full name is required"),d||(a.username="Username is required"),j||(a.email="Email is required"),v?v.length<8&&(a.password="Password must be at least 8 characters"):a.password="Password is required",h?(isNaN(h)||h<=0)&&(a.age="Please enter a valid age"):a.age="Age is required",f(a),Object.keys(a).length===0},z=()=>{const a={};return b||(a.nativeLanguage="Please select your native language"),w||(a.learningLanguage="Please select a learning language"),f(a),Object.keys(a).length===0},V=()=>{M()&&p("language")},Y=async()=>{var E,F;if(!z())return;const a={fullname:g,username:d,email:j,password:v,age:parseInt(h),nativeLanguage:b,learningLanguage:w,speciallyAbled:y};try{const n=await K.post("http://localhost:3000/api/auth/signup",a,{withCredentials:!0,headers:{"Content-Type":"application/json"}});n.status===201?(t({title:"Signup Successful",description:"Your account has been created successfully.",type:"success"}),c("/home")):(t({title:"Signup Failed",description:n.data.message||"An error occurred during signup.",type:"error"}),console.log("Signup failed: ",n.data.message))}catch(n){console.log("Error during signup: ",n),t({title:"Signup Failed",description:((F=(E=n.response)==null?void 0:E.data)==null?void 0:F.message)||"An error occurred during signup.",type:"error"}),n.response&&n.response.data?f({form:n.response.data.message}):f({form:"An unexpected error occurred"})}};return e.jsx("div",{className:"bg-white min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"relative isolate px-6 pt-14 lg:px-8",children:[e.jsxs("div",{className:"absolute inset-x-0 -top-40 -z-10 transform-gpu overflow-hidden blur-3xl sm:-top-80","aria-hidden":"true",children:[e.jsx("div",{className:"relative left-[calc(50%-11rem)] aspect-[1155/678] w-[36.125rem] -translate-x-1/2 rotate-[30deg] bg-gradient-to-tr from-[#ff80b5] to-[#9089fc] opacity-30 sm:left-[calc(50%-30rem)] sm:w-[72.1875rem]",style:{clipPath:"polygon(74.1% 44.1%, 100% 61.6%, 97.5% 26.9%, 85.5% 0.1%, 80.7% 2%, 72.5% 32.5%, 60.2% 62.4%, 52.4% 68.1%, 47.5% 58.3%, 45.2% 34.5%, 27.5% 76.7%, 0.1% 64.9%, 17.9% 100%, 27.6% 76.8%, 76.1% 97.7%, 74.1% 44.1%)"}}),e.jsx("div",{className:"relative right-[calc(50%-11rem)] aspect-[1155/678] w-[36.125rem] translate-x-1/2 rotate-[-30deg] bg-gradient-to-tr from-[#ff80b5] to-[#9089fc] opacity-30 sm:right-[calc(50%-30rem)] sm:w-[72.1875rem]",style:{clipPath:"polygon(25.9% 44.1%, 0% 61.6%, 2.5% 26.9%, 14.5% 0.1%, 19.3% 2%, 27.5% 32.5%, 39.8% 62.4%, 47.6% 68.1%, 52.5% 58.3%, 54.8% 34.5%, 72.5% 76.7%, 99.9% 64.9%, 82.1% 100%, 72.4% 76.8%, 23.9% 97.7%, 25.9% 44.1%)"}})]}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsxs(Q,{value:u,onValueChange:p,className:"w-[400px] bg-white p-6 rounded-xl shadow-md",children:[e.jsxs(W,{className:"grid w-full grid-cols-2 mb-6",children:[e.jsx(O,{value:"personal",children:"Personal Details"}),e.jsx(O,{value:"language",children:"Language Preferences"})]}),s.form&&e.jsx("div",{className:"mb-4 text-red-500 text-center",children:s.form}),e.jsx(q,{value:"personal",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"fullname",children:"Full Name"}),e.jsx(m,{id:"fullname",type:"text",placeholder:"Enter your full name",value:g,onChange:a=>x(a.target.value)}),s.fullname&&e.jsx("small",{className:"text-red-500",children:s.fullname})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"username",children:"Username"}),e.jsx(m,{id:"username",type:"text",placeholder:"Choose a username",value:d,onChange:a=>i(a.target.value)}),s.username&&e.jsx("small",{className:"text-red-500",children:s.username})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"email",children:"Email"}),e.jsx(m,{id:"email",type:"email",placeholder:"Enter your email",value:j,onChange:a=>A(a.target.value)}),s.email&&e.jsx("small",{className:"text-red-500",children:s.email})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"password",children:"Password"}),e.jsx(m,{id:"password",type:"password",placeholder:"Create a password",value:v,onChange:a=>k(a.target.value)}),s.password&&e.jsx("small",{className:"text-red-500",children:s.password})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"age",children:"Age"}),e.jsx(m,{id:"age",type:"number",placeholder:"Enter your age",value:h,onChange:a=>R(a.target.value)}),s.age&&e.jsx("small",{className:"text-red-500",children:s.age})]}),e.jsx(P,{className:"w-full",style:{backgroundColor:C.lightestBlue,cursor:"pointer"},onClick:V,children:"Next"})]})}),e.jsx(q,{value:"language",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"native-language",children:"Native Language"}),e.jsx(N,{options:X,selectedValue:b,onSelect:D,placeholder:"Select Native Language",isOpen:L,toggleOpen:()=>U(!L)}),s.nativeLanguage&&e.jsx("small",{className:"text-red-500",children:s.nativeLanguage})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"learning-language",children:"Learning Language"}),e.jsx(N,{options:Z,selectedValue:w,onSelect:B,placeholder:"Select Learning Language",isOpen:S,toggleOpen:()=>H(!S)}),s.learningLanguage&&e.jsx("small",{className:"text-red-500",children:s.learningLanguage})]}),e.jsx("div",{children:e.jsx(T,{checked:y,onChange:()=>I(!y),label:"Specially Abled"})}),e.jsx(P,{className:"w-full",style:{backgroundColor:C.lightBlue,cursor:"pointer"},onClick:Y,children:"Sign Up"}),e.jsx("div",{className:"text-center mt-2",children:e.jsx(J,{to:"/login",className:"text-sm text-blue-600 hover:underline",children:"Already have an account? Login"})})]})})]})})]})})};export{se as default};
